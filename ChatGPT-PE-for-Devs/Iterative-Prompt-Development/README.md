# Iterative Prompt Development

| Contents |
| :--- |
| [Introduction](#introduction) |
| [Example](#example) |

## Introduction

<img src="https://drive.google.com/uc?export=view&id=1LMCztMfXiSCo_ObgWOodiKvGwuaQKndY" height="450" width="600" alt="DeepLearning.AI">

**Iterative Prompt Development** is an approach used to refine and improve the quality of responses generated by language models over time. It involves a continuous process of experimenting with different prompts and instructions to train the model to produce more accurate and contextually relevant outputs.

Here's how Iterative Prompt Development works:

1. **Initial Prompt:** You begin with an initial prompt or instruction to the language model. This prompt is designed to elicit a specific type of response or answer to a question or task.

2. **Model Output:** The language model generates a response based on the initial prompt. This output may vary in terms of accuracy, relevance, or completeness.

3. **Evaluation:** You evaluate the model's response to determine if it meets your expectations and requirements. This evaluation may involve assessing factors like correctness, relevance, coherence, and context.

4. **Adjustment:** Based on the evaluation, you make adjustments to the prompt or instructions. This can include refining the wording, specifying the desired format, providing additional context, or asking the model to think more deeply about the question.

5. **Reiteration:** You then feed the adjusted prompt back to the model and collect a new response. This process is repeated iteratively, often multiple times, with each iteration aiming to improve the quality of the generated output.

6. **Feedback Loop:** You may also incorporate feedback from users or domain experts to further enhance the prompts and instructions. This feedback loop helps fine-tune the model's performance.

7. **Testing and Validation:** Throughout the iterative process, you test the model's responses and validate them against ground truth or desired outcomes. This helps ensure that the model is continually improving.

8. **Documentation:** As you iterate and refine the prompts, it's important to document the changes and lessons learned. This documentation can serve as a reference for future interactions with the model.

9. **Deployment:** Once you are satisfied with the model's performance, you can deploy it in your application or system, leveraging the refined prompts and instructions to obtain accurate and contextually appropriate responses.

## Example

### Generate a marketing product description from a product fact sheet for website

Here's a fact sheet about a chair, with a description stating that it belongs to a lovely collection inspired by mid-century design. It provides details about its construction, dimensions, available options, materials, and its origin in Italy. Now, suppose you intend to use this fact sheet to assist a marketing team in crafting a product description for an online retail website.

```python
fact_sheet_chair = """
    OVERVIEW
    - Part of a beautiful family of mid-century inspired office furniture, 
    including filing cabinets, desks, bookcases, meeting tables, and more.
    - Several options of shell color and base finishes.
    - Available with plastic back and front upholstery (SWC-100) 
    or full upholstery (SWC-110) in 10 fabric and 6 leather options.
    - Base finish options are: stainless steel, matte black, 
    gloss white, or chrome.
    - Chair is available with or without armrests.
    - Suitable for home or business settings.
    - Qualified for contract use.

    CONSTRUCTION
    - 5-wheel plastic coated aluminum base.
    - Pneumatic chair adjust for easy raise/lower action.

    DIMENSIONS
    - WIDTH 53 CM | 20.87”
    - DEPTH 51 CM | 20.08”
    - HEIGHT 80 CM | 31.50”
    - SEAT HEIGHT 44 CM | 17.32”
    - SEAT DEPTH 41 CM | 16.14”

    OPTIONS
    - Soft or hard-floor caster options.
    - Two choices of seat foam densities: 
    medium (1.8 lb/ft3) or high (2.8 lb/ft3)
    - Armless or 8 position PU armrests 

    MATERIALS
    SHELL BASE GLIDER
    - Cast Aluminum with modified nylon PA6/PA66 coating.
    - Shell thickness: 10 mm.
    SEAT
    - HD36 foam

    COUNTRY OF ORIGIN
    - Italy
"""
```

***First attempt to explain the task to the large language model***

````python
prompt = f"""
    Your task is to help a marketing team create a 
    description for a retail website of a product based 
    on a technical fact sheet.

    Write a product description based on the information 
    provided in the technical specifications delimited by 
    triple backticks.

    Technical specifications: ```{fact_sheet_chair}```
"""
response = get_completion(prompt)
print(response)
````

```
Output

Introducing our stunning mid-century inspired office chair, the perfect addition to any home or business setting. This chair is part of a beautiful family of office furniture, including filing cabinets, desks, bookcases, meeting tables, and more, all designed with a timeless mid-century aesthetic.

One of the standout features of this chair is the variety of customization options available. You can choose from several shell colors and base finishes to perfectly match your existing decor. The chair is available with either plastic back and front upholstery or full upholstery in a range of 10 fabric and 6 leather options, allowing you to create a look that is uniquely yours.

The chair is also available with or without armrests, giving you the flexibility to choose the option that best suits your needs. The base finish options include stainless steel, matte black, gloss white, or chrome, ensuring that you can find the perfect match for your space.

In terms of construction, this chair is built to last. It features a 5-wheel plastic coated aluminum base, providing stability and mobility. The pneumatic chair adjust allows for easy raise and lower action, ensuring optimal comfort throughout the day.

When it comes to dimensions, this chair is designed with both style and comfort in mind. With a width of 53 cm (20.87"), depth of 51 cm (20.08"), and height of 80 cm (31.50"), it offers ample space without overwhelming your space. The seat height is 44 cm (17.32") and the seat depth is 41 cm (16.14"), providing a comfortable seating experience for users of all heights.

We understand that every space is unique, which is why we offer a range of options to further customize your chair. You can choose between soft or hard-floor caster options, ensuring that your chair glides smoothly across any surface. Additionally, you have the choice between two seat foam densities: medium (1.8 lb/ft3) or high (2.8 lb/ft3), allowing you to select the level of support that suits your preferences. The chair is also available with armless design or 8 position PU armrests, providing additional comfort and versatility.

When it comes to materials, this chair is crafted with the utmost attention to quality. The shell base glider is made from cast aluminum with a modified nylon PA6/PA66 coating, ensuring durability and longevity. The shell thickness is 10 mm, providing a sturdy and reliable structure. The seat is made from HD36 foam, offering a comfortable and supportive seating experience.

Finally, this chair is proudly made in Italy, known for its exceptional craftsmanship and design. With its combination of style, functionality, and customization options, this mid-century inspired office chair is the perfect choice for those seeking a timeless and elegant addition to their workspace.

Please note that this chair is qualified for contract use, making it suitable for a wide range of professional settings. Upgrade your office or home with this exceptional piece of furniture and experience the perfect blend of style and comfort.
```

The description crafted by the model for the mid-century inspired office chair meets the criteria of starting from the technical fact sheet and delivering a product description, as requested. However, upon review, it is evident that the generated description is quite lengthy. Maybe little bit shorter description will fulfill our needs.

***Second attempt to reduce the lengthy description***

We then refine our prompt by setting *a 50-word limit to provide clearer guidance on the desired length.*

````python
prompt = f"""
    Your task is to help a marketing team create a 
    description for a retail website of a product based 
    on a technical fact sheet.

    Write a product description based on the information 
    provided in the technical specifications delimited by 
    triple backticks.

    Use at most 50 words.

    Technical specifications: ```{fact_sheet_chair}```
"""
response = get_completion(prompt)
print(response)
print()
print(len(response.split(" ")))
````

```
Output

Introducing our mid-century inspired office chair, part of a stunning furniture collection. With various color and finish options, choose between plastic or full upholstery in fabric or leather. The chair features a durable aluminum base with 5 wheels and pneumatic height adjustment. Perfect for home or business use. Made in Italy.

51
```

After rerunning the model, we receive a more concise and appealing product description. Next, we take the generated response, split it into segments based on spaces, and calculate its length, which turns out to be 51 words. While large language models may not always precisely adhere to word count instructions, this result is considered satisfactory, as sometimes the output can extend to 60 or 65 words but remains within an acceptable range.

***Third attempt to focus on the aspects that are relevant to the intended audience***

While we keep improving this text for our websites, we may realize that our website isn't targeting direct consumers; instead, it's meant to sell furniture to furniture retailers who are more concerned with the chair's technical specifications and materials. In such a scenario, we can take this prompt and make it more specific about the technical details by continuing to modify it.

````python
prompt = f"""
    Your task is to help a marketing team create a 
    description for a retail website of a product based 
    on a technical fact sheet.

    Write a product description based on the information 
    provided in the technical specifications delimited by 
    triple backticks.

    The description is intended for furniture retailers, 
    so should be technical in nature and focus on the 
    materials the product is constructed from.

    Use at most 50 words.

    Technical specifications: ```{fact_sheet_chair}```
"""
response = get_completion(prompt)
print(response)
````

```
Output

Introducing our mid-century inspired office chair, part of a beautiful furniture collection. With various shell colors and base finishes, it offers versatility for any setting. Choose between plastic or full upholstery in a range of fabric and leather options. The chair features a durable aluminum base with 5-wheel design and pneumatic chair adjustment. Made in Italy.
```

That's not bad at all. It mentions details like the coated aluminum base and pneumatic chair, highlighting high-quality materials etc. So, you see, by adjusting the prompt, you can make it focus more on specific characteristics of your choice.

***Fourth attempt to add product ID in tech spec at the end of description***

As we review this, we might decide that we also want to include the product ID at the end of the description, such as SWC 110 and SWC 100. To achieve this, we can further refine the prompt by instructing it to include every 7-character product ID in the technical specifications.

```python
prompt = f"""
    Your task is to help a marketing team create a 
    description for a retail website of a product based 
    on a technical fact sheet.

    Write a product description based on the information 
    provided in the technical specifications delimited by 
    triple backticks.

    The description is intended for furniture retailers, 
    so should be technical in nature and focus on the 
    materials the product is constructed from.

    At the end of the description, include every 7-character 
    Product ID in the technical specification.

    Use at most 50 words.

    Technical specifications: ```{fact_sheet_chair}```
"""
response = get_completion(prompt)
print(response)
```

```
Introducing our mid-century inspired office chair, part of a beautiful family of furniture. With various shell colors and base finishes, this chair offers versatility and style. Choose between plastic or full upholstery in a range of fabric and leather options. The chair features a 5-wheel plastic coated aluminum base and pneumatic chair adjustment for easy raise/lower action. Available with or without armrests, this chair is suitable for both home and business settings. Made with high-quality materials, including a cast aluminum shell with modified nylon coating and HD36 foam seat, this chair is built to last. Made in Italy.

Product IDs: SWC-100, SWC-110
```

Output looks quite refined now.

So, what we've just witnessed is a brief example of the iterative process many developers undergo when refining prompts. Following the guidelines shared in the previous module, such as clarity, specificity, and allowing the model time to think, typically start with an initial prompt, observe the results, and then gradually refine the prompt to approach the desired outcome. It's important to note that many effective prompts used in different applications are the result of such iterative processes.

***Fifth attempt to add a table with product dimensions***

Just for fun, here's a more complex prompt to demonstrate chatGPT's capabilities. It includes extra instructions: besides the product description, add a table with product dimensions and format the response in HTML.

```python
prompt = f"""
    Your task is to help a marketing team create a 
    description for a retail website of a product based 
    on a technical fact sheet.

    Write a product description based on the information 
    provided in the technical specifications delimited by 
    triple backticks.

    The description is intended for furniture retailers, 
    so should be technical in nature and focus on the 
    materials the product is constructed from.

    At the end of the description, include every 7-character 
    Product ID in the technical specification.

    After the description, include a table that gives the 
    product's dimensions. The table should have two columns.
    In the first column include the name of the dimension. 
    In the second column include the measurements in inches only.

    Give the table the title 'Product Dimensions'.

    Format everything as HTML that can be used in a website. 
    Place the description in a <div> element.

    Use at most 50 words.

    Technical specifications: ```{fact_sheet_chair}```
"""

response = get_completion(prompt)
print(response)
```

```HTML
Output

<div>
  <h2>Product Description</h2>
  <p>
    The SWC-100 office chair is part of a stunning collection of mid-century inspired furniture, perfect for both home and business settings. With a variety of shell colors and base finishes to choose from, this chair offers versatility and style. The chair is available with plastic back and front upholstery or full upholstery in a range of fabric and leather options. The 5-wheel plastic coated aluminum base ensures stability and mobility, while the pneumatic chair adjust allows for easy raise and lower action. Choose between soft or hard-floor casters and two seat foam densities for personalized comfort. The SWC-100 office chair is a sleek and functional addition to any workspace.
  </p>
  <p>
    Product ID: SWC-100
  </p>
  <h2>Product Dimensions</h2>
  <table>
    <tr>
      <th>Dimension</th>
      <th>Measurement (inches)</th>
    </tr>
    <tr>
      <td>Width</td>
      <td>20.87"</td>
    </tr>
    <tr>
      <td>Depth</td>
      <td>20.08"</td>
    </tr>
    <tr>
      <td>Height</td>
      <td>31.50"</td>
    </tr>
    <tr>
      <td>Seat Height</td>
      <td>17.32"</td>
    </tr>
    <tr>
      <td>Seat Depth</td>
      <td>16.14"</td>
    </tr>
  </table>
</div>
```

This is how this HTML will look like,

<img src="https://drive.google.com/uc?export=view&id=1aPUUKXWouCIK1Da_Sj6vtmBG1qJPQeeu" height="450" width="600" alt="DeepLearning.AI">
